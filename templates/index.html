<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

    <title>Survey Form</title>

    <style>
        
    .flask-image{
    text-align: center;
    /* width: 200px; Set a fixed width */
    height: 400px; /* Set a fixed height */
    object-fit: cover; /* Maintain aspect ratio while covering the specified dimensions */
    margin-top: 10px;
    margin-bottom: 20px;
    max-width: none; /* Remove the max-width property */
    }

    </style>

</head>

<body>
    <div class="card">
        <h1>{{ question }}</h1>
        {% if randomImage %}
            <img src="{{ url_for('static', filename='images/' + randomImage) }}" alt="Random Image" class="flask-image">
        {% else %}
            <p>No images found.</p>
        {% endif %}
        
        <div class="button-container">

            <form method="post" action="{{ url_for('submit') }}" id="response-form">
                <input type="hidden" name="response" id="response-input">
                <input type="hidden" name="mouse_data" id="mouse-data-input">
                <!-- Add a new input field for the label -->
                <input type="hidden" name="label" id="label-input" value="{{ randomImage.split('.')[0][:-6] if randomImage else '' }}">
            </form>
            
                <button class="response-button response-button-left" onclick="submitResponse('Yes')">Yes</button>
                <button class="response-button response-button-right" onclick="submitResponse('No')">No</button>  
        </div>
        <br><br>
        <p><a href="{{ url_for('results') }}">View Results</a></p>
    </div>
    
    <script>
        var mouseData = [];
        document.addEventListener("DOMContentLoaded", function () {
            document.querySelector('.card').classList.add('fade-in');
            console.log("test");
            // Initialize mouse tracking array
    
            // Track mouse movements
            

            document.addEventListener("mousemove", function (event) {
            var x = event.clientX;
            var y = event.clientY;
            mouseData.push({ x: x, y: y });
            console.log('Mouse Data:', mouseData);
            console.log('Mouse Data:', JSON.stringify(mouseData)); 
            });

            // Submit mouse data when the form is submitted
            document.getElementById('response-form').addEventListener('submit', function () {
                // document.getElementById('mouse-data-input').value = JSON.stringify(mouseData);
                document.getElementById('mouse-data-input').value = JSON.stringify(mouseData);

                console.log('Mouse Data:', JSON.stringify(mouseData)); // Log mouse data for debugging
                console.log("test");
            });
        });
    
        function submitResponse(response) {
            document.getElementById('response-input').value = response;
            document.getElementById('mouse-data-input').value = JSON.stringify(mouseData);
            document.getElementById('response-form').submit();
        }
    </script>
</body>
</html>
